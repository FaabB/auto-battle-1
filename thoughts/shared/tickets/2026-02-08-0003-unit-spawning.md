# Ticket 3: Unit Spawning

**Delivers:** Buildings produce units over time, rendered as colored circles

**Depends on:** 2

## What to Implement

| What to implement | How to test |
|-------------------|-------------|
| Unit component (UnitType, Team marker) | Components defined |
| Health component (current, max) | Health struct usable on units |
| Combat stats component (damage, attack_speed, range) | Stats struct defined |
| Movement component (speed) | Movement speed configurable per unit |
| Production timer on Barracks buildings | Timer ticks down each frame |
| Spawn unit at building position when timer fires | Place Barracks → after ~3 seconds a unit appears nearby |
| Unit rendering as circles | Player units = green circles |
| Team coloring (Player team) | Units are clearly player-colored |
| Units spawn and idle (no movement yet) | Units accumulate near their barracks |

## Context

This is the first ticket where the game "comes alive" — buildings actually do something. Only Barracks produce units; Farms don't produce units (they'll generate gold in Ticket 6).

Unit stats for the prototype soldier:
- Health: 100
- Damage: 10
- Attack speed: 1.0/sec
- Movement speed: ~50 units/sec
- Attack range: ~30 units

These values will be tuned later. The important thing is that units spawn, are visible, and have the right components for Ticket 4 (movement) and Ticket 5 (combat).

Units should spawn slightly to the right of their parent building (toward the combat zone) to avoid visual overlap with the building grid.

Relevant files:
- `src/components/mod.rs` — Unit, Health, Combat, Movement, Team components
- New plugin: building production system
- `src/screens/in_game.rs` — register new systems

## Done When

- Place a Barracks building
- Wait ~3 seconds
- See a green circle spawn near the building
- More units continue spawning at regular intervals
- Units stay near their spawn point (no movement yet)

## Architecture Notes (from Ticket 1 review)

- **`GameState` location**: If this ticket introduces a `Team` enum (the 3rd+ state-related type), consider whether `GameState`/`InGameState`/`Team` should move from `lib.rs` to `src/game/states.rs`.
- **Re-create `src/components/mod.rs`** if cross-cutting components (Health, Team, etc.) don't belong in a domain module. Domain-specific components should stay in their domain module.

## References

- Source: `thoughts/shared/research/2026-02-04-tano-style-game-research.md` (Section 2.3 Unit System, Section 2.2 Building System production)
